<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <title>{{ title or "Happi10 CRM" }}</title>
  <style>
	:root{
	  --bg: hsl(220 20% 7%);
	  --fg: hsl(210 20% 92%);
	  --card: hsl(220 18% 10%);
	  --card-fg: hsl(210 20% 92%);
	  --muted: hsl(215 12% 52%);
	  --muted2: hsl(215 12% 42%);
	  --panel: hsl(220 18% 10%);
	  --panel2: hsl(220 14% 14%);
	  --border: hsl(220 14% 18%);
	  --border2: hsl(220 14% 22%);
	  --shadow: 0 0 0 1px hsl(220 14% 18% / .5), 0 10px 28px hsl(220 20% 4% / .5);
	  --inputBg: hsl(220 14% 14%);
	  --inputBorder: hsl(220 14% 18%);
	  --btnBg: hsl(220 16% 16%);
	  --btnHover: hsl(220 14% 20%);
	  --btnBorder: hsl(220 14% 18%);
	  --primary: hsl(168 70% 48%);
	  --primaryFg: hsl(220 20% 7%);
	  --accent: hsl(168 50% 20%);
	  --accentFg: hsl(168 70% 60%);
	  --danger: hsl(0 65% 55%);
	  --dangerBg: hsl(0 65% 55% / .1);
	  --dangerHover: hsl(0 65% 55% / .16);
	  --dangerBorder: hsl(0 65% 55% / .28);
	  --dangerFg: hsl(0 80% 85%);
	  --ring: hsl(168 70% 48% / .25);
	  --ringBorder: hsl(168 70% 48% / .45);
	  --warning: hsl(38 92% 50%);
	  --success: hsl(142 60% 45%);
	  --info: hsl(210 80% 55%);
	}
	html[data-theme="light"]{
	  --bg: hsl(220 20% 97%);
	  --fg: hsl(220 20% 7%);
	  --card: hsl(0 0% 100%);
	  --card-fg: hsl(220 20% 7%);
	  --muted: hsl(215 12% 52%);
	  --muted2: hsl(215 12% 62%);
	  --panel: hsl(0 0% 100%);
	  --panel2: hsl(220 14% 96%);
	  --border: hsl(220 14% 88%);
	  --border2: hsl(220 14% 84%);
	  --shadow: 0 0 0 1px hsl(220 14% 88% / .6), 0 14px 35px hsl(220 20% 10% / .06);
	  --inputBg: hsl(0 0% 100%);
	  --inputBorder: hsl(220 14% 86%);
	  --btnBg: hsl(0 0% 100%);
	  --btnHover: hsl(220 14% 96%);
	  --btnBorder: hsl(220 14% 86%);
	  --primary: hsl(168 70% 42%);
	  --primaryFg: hsl(0 0% 100%);
	  --accent: hsl(168 50% 92%);
	  --accentFg: hsl(168 70% 30%);
	  --dangerBg: hsl(0 65% 55% / .08);
	  --dangerHover: hsl(0 65% 55% / .12);
	  --dangerBorder: hsl(0 65% 55% / .2);
	  --dangerFg: hsl(0 70% 35%);
	  --ring: hsl(168 70% 48% / .2);
	  --ringBorder: hsl(168 70% 48% / .4);
	}

	* { box-sizing: border-box; }
	body {
	  font-family: 'Inter', system-ui, sans-serif;
	  background: var(--bg) !important;
	  color: var(--fg) !important;
	  -webkit-font-smoothing: antialiased;
	  line-height: 1.5;
	}
	code, .font-mono { font-family: 'JetBrains Mono', monospace; }

	#bgGlow { opacity: .6; }
	html[data-theme="light"] #bgGlow {
	  opacity: .35;
	  background:
		radial-gradient(1200px 600px at 20% -10%, hsl(168 70% 48% / .06), transparent 55%),
		radial-gradient(900px 500px at 90% 0%, hsl(168 70% 48% / .04), transparent 55%),
		radial-gradient(700px 500px at 50% 110%, hsl(168 70% 48% / .03), transparent 55%) !important;
	}

	.shell { background: transparent; }

	.card {
	  background: var(--card);
	  border: 1px solid var(--border);
	  box-shadow: var(--shadow);
	  border-radius: 16px;
	}
	.card-soft {
	  background: var(--panel2);
	  border: 1px solid var(--border);
	  border-radius: 14px;
	}

	.text-muted { color: var(--muted) !important; }
	.text-muted2 { color: var(--muted2) !important; }

	button {
	  border-radius: 10px;
	  border: 1px solid var(--btnBorder);
	  background: var(--btnBg);
	  color: var(--fg);
	  font-family: 'Inter', system-ui, sans-serif;
	  transition: transform .06s ease, background .15s ease, border-color .15s ease;
	}
	button:hover { background: var(--btnHover); }
	button:active { transform: translateY(1px); }

	.btn-primary {
	  background: var(--primary) !important;
	  color: var(--primaryFg) !important;
	  border-color: transparent !important;
	  font-weight: 600;
	}
	.btn-primary:hover { opacity: .9; }

	.text-red-200,.text-red-300,.text-red-400,.text-red-500 { color: var(--dangerFg) !important; }
	.bg-red-500\/10 { background: var(--dangerBg) !important; }
	.border-red-500\/20 { border-color: var(--dangerBorder) !important; }
	.hover\:bg-red-500\/20:hover { background: var(--dangerHover) !important; }

	input, select, textarea {
	  border-radius: 10px !important;
	  border: 1px solid var(--inputBorder) !important;
	  background: var(--inputBg) !important;
	  color: var(--fg) !important;
	  outline: none !important;
	  font-family: 'Inter', system-ui, sans-serif;
	}
	input:focus, select:focus, textarea:focus {
	  box-shadow: 0 0 0 3px var(--ring) !important;
	  border-color: var(--ringBorder) !important;
	}
	input::placeholder, textarea::placeholder { color: var(--muted) !important; }

	table { border-color: var(--border) !important; }
	thead { color: var(--muted) !important; }
	tr { border-color: var(--border) !important; }

	.badge {
	  border: 1px solid var(--border);
	  background: var(--panel2);
	  color: var(--muted);
	  border-radius: 999px;
	  padding: 2px 10px;
	  font-size: 11px;
	}

	.theme-toggle {
	  border: 1px solid var(--border);
	  background: var(--btnBg);
	  color: var(--fg);
	  border-radius: 10px;
	  padding: 8px 12px;
	  display: flex;
	  align-items: center;
	  gap: 8px;
	  font-size: 13px;
	}
	.theme-toggle:hover { background: var(--btnHover); }

	/* Light-mode overrides for dark-only tailwind classes */
	html[data-theme="light"] .border-white\/5,
	html[data-theme="light"] .border-white\/10,
	html[data-theme="light"] .border-white\/15,
	html[data-theme="light"] .border-white\/20 { border-color: var(--border) !important; }

	html[data-theme="light"] .bg-white\/\[0\.02\],
	html[data-theme="light"] .bg-white\/\[0\.03\],
	html[data-theme="light"] .bg-white\/5,
	html[data-theme="light"] .bg-white\/10,
	html[data-theme="light"] .bg-white\/15 { background: var(--panel2) !important; }

	html[data-theme="light"] .bg-black\/20,
	html[data-theme="light"] .bg-black\/40 { background: var(--panel) !important; }

	html[data-theme="light"] .text-white\/90,
	html[data-theme="light"] .text-white\/80,
	html[data-theme="light"] .text-white\/70,
	html[data-theme="light"] .text-white\/60,
	html[data-theme="light"] .text-white\/55,
	html[data-theme="light"] .text-white\/50,
	html[data-theme="light"] .text-white\/45,
	html[data-theme="light"] .text-white\/40,
	html[data-theme="light"] .text-white\/35 { color: var(--muted) !important; }

	.hover\:bg-white\/\[0\.03\]:hover { background: var(--btnHover) !important; }
  </style>
</head>
<body>
  <div id="bgGlow" class="pointer-events-none fixed inset-0"
	   style="background:
		 radial-gradient(1200px 600px at 20% -10%, hsl(168 70% 48% / .08), transparent 55%),
		 radial-gradient(900px 500px at 90% 0%, hsl(168 70% 48% / .05), transparent 55%),
		 radial-gradient(700px 500px at 50% 110%, hsl(168 70% 48% / .04), transparent 55%);">
  </div>
  <div class="relative max-w-6xl mx-auto px-6 py-8 shell">
	<div class="flex items-center justify-between mb-8">
	  <a href="/" class="flex items-center gap-2 text-lg font-semibold tracking-tight" style="text-decoration:none;color:var(--fg);">
		<span class="inline-flex h-8 w-8 items-center justify-center rounded-lg"
			  style="border:1px solid var(--border); background:var(--primary); color:var(--primaryFg);">
		  <span class="font-bold text-sm">H</span>
		</span>
		Happi10 CRM
	  </a>
	  <div class="flex items-center gap-3">
		<div class="text-xs" style="color:var(--muted);">контент · порядок · delay</div>
		<button id="themeToggle" type="button" class="theme-toggle">
		  <i id="themeIcon" class="fa-solid fa-moon"></i>
		  <span id="themeLabel">Dark</span>
		</button>
	  </div>
	</div>
	<div class="card">
	  <div class="p-6">
		{% block content %}{% endblock %}
	  </div>
	</div>
  </div>
  <script>
	(function () {
	  const root = document.documentElement;
	  const icon = document.getElementById("themeIcon");
	  const label = document.getElementById("themeLabel");
	  function apply(theme) {
		root.setAttribute("data-theme", theme);
		const isLight = theme === "light";
		if (icon) icon.className = "fa-solid " + (isLight ? "fa-sun" : "fa-moon");
		if (label) label.textContent = isLight ? "Light" : "Dark";
	  }
	  const saved = localStorage.getItem("crm_theme");
	  apply(saved || "dark");
	  document.getElementById("themeToggle")?.addEventListener("click", () => {
		const next = (root.getAttribute("data-theme") === "light") ? "dark" : "light";
		localStorage.setItem("crm_theme", next);
		apply(next);
	  });
	})();
  </script>
</body>
</html>